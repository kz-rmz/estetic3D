{% if categories %}
<div class="collapse navbar-collapse justify-content-center" id="collapsibleNavId">
  <ul class="navbar-nav mt-2 mt-lg-0">
    {% for category in categories %}
      {% if category.children %}

        <li class="nav-item dropdown pe-lg-3 pe-1">
          <a class="nav-link dropdown-toggle" href="{{ category.href }}" id="dropdownId" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ category.name }}</a>

          <div class="dropdown-menu" aria-labelledby="dropdownId">
            {% for children in category.children|batch(category.children|length / category.column|round(1, 'ceil')) %}
              {% for child in children %}
                <a class="dropdown-item" href="{{ child.href }}">{{ child.name }}</a>
                {# <a class="dropdown-item see-all" href="{{ category.href }}">{{ text_all }} {{ category.name }}</a> #}
              {% endfor %}
            {% endfor %}
          </div>

        </li>

      {% else %}
        <li class="nav-item pe-lg-3 pe-1">
          <a class="nav-link" href="{{ category.href }}">{{ category.name }}</a>
        </li>
      {% endif %}
    {% endfor %}
  </ul>
</div>
{% endif %}

{#{% if categories %}
<div class="container">
  <nav id="menu" class="navbar">

    <div class="navbar-header"><span id="category" class="visible-xs">{{ text_category }}</span>
      <button type="button" class="btn btn-navbar navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse"><i class="fa fa-bars"></i></button>
    </div>

    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav">
        {% for category in categories %}
          {% if category.children %}

            <li class="dropdown">
              <a href="{{ category.href }}" class="dropdown-toggle" data-toggle="dropdown">{{ category.name }}</a>
              <div class="dropdown-menu">
                <div class="dropdown-inner">

                  {% for children in category.children|batch(category.children|length / category.column|round(1, 'ceil')) %}

                  <ul class="list-unstyled">
                    {% for child in children %}

                      <li><a href="{{ child.href }}">{{ child.name }}</a></li>

                    {% endfor %}
                  </ul>

                  {% endfor %}

                </div>
                <a href="{{ category.href }}" class="see-all">{{ text_all }} {{ category.name }}</a> </div>
            </li>
          {% else %}
            <li>
              <a href="{{ category.href }}">{{ category.name }}</a>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
    </div>

  </nav>
</div>
{% endif %} #}